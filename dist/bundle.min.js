angular.module("myapp",["ngAnimate","ui.router","angular-stripe"]).config(["$stateProvider","$urlRouterProvider","stripeProvider",function(e,t,r){r.setPublishableKey("pk_test_4dSzkXUjuiBK1bYeOumvIjeP"),t.otherwise("/"),e.state("home",{templateUrl:"../views/splash.html",url:"/"}).state("shop",{templateUrl:"../views/shop.html",controller:"shopCtrl",url:"/shop"}).state("mens",{templateUrl:"../views/mens.html",controller:"mensCtrl",url:"/mens"}).state("women",{templateUrl:"../views/women.html",controller:"mensCtrl",url:"/women"}).state("catalog",{templateUrl:"../views/catalog.html",controller:"catalogCtrl",url:"/catalog/:type/:view/:order/:style/:display/:page/:color",params:{type:"guys",view:"24",order:"popular",style:"tees",display:"hero",page:"1"}}).state("product",{templateUrl:"../views/product.html",controller:"productCtrl",url:"/product/:id/:gender"}).state("cart",{templateUrl:"../views/cart.html",controller:"cartCtrl",url:"/cart"}).state("checkout",{templateUrl:"../views/checkout.html",controller:"checkoutCtrl",url:"/checkout"})}]),angular.module("myapp").controller("cartCtrl",["$scope",function(e){e.test="testing"}]),angular.module("myapp").controller("catalogCtrl",["$scope","$stateParams","$state","catalogService",function(e,t,r,a){e.products=[],e.limitedProducts=[],e.getAllProducts=function(){a.getProducts().then(function(t){e.thing(t)})},e.getAllProducts(),e.thing=function(r){e.products=a.getShirts(r),e.limitedProducts=e.products.splice((t.page-1)*t.view,t.view)}}]),angular.module("myapp").service("catalogService",["$http","$stateParams",function(e,t){this.getProducts=function(){return e({method:"GET",url:"/api/products"}).then(function(e){return e.data})},this.getShirts=function(e){var r=[];if("guys"===t.type){if("tees"===t.style)if("art"===t.display)for(var a=0;a<e.length;a++)null!=e[a].men_t&&r.push({gender:"male",id:e[a].shirt_id,img:e[a].art,price:e[a].men_t_price,name:e[a].name,artist:e[a].artist,color:e[a].color});else for(var a=0;a<e.length;a++)null!=e[a].men_t&&r.push({gender:"male",id:e[a].shirt_id,img:e[a].men_t,price:e[a].men_t_price,name:e[a].name,artist:e[a].artist,color:e[a].color});else if("v-neck"===t.style)if("art"===t.display)for(var a=0;a<e.length;a++)null!=e[a].men_v&&r.push({gender:"male",id:e[a].shirt_id,img:e[a].art,price:e[a].men_v_price,name:e[a].name,artist:e[a].artist,color:e[a].color});else for(var a=0;a<e.length;a++)null!=e[a].men_v&&r.push({gender:"male",id:e[a].shirt_id,img:e[a].men_v,price:e[a].men_v_price,name:e[a].name,artist:e[a].artist,color:e[a].color});else if("hoodie"===t.style)if("art"===t.display)for(var a=0;a<e.length;a++)null!=e[a].men_h&&r.push({gender:"male",id:e[a].shirt_id,img:e[a].art,price:e[a].men_h_price,name:e[a].name,artist:e[a].artist,color:e[a].color});else for(var a=0;a<e.length;a++)null!=e[a].men_h&&r.push({gender:"male",id:e[a].shirt_id,img:e[a].men_h,price:e[a].men_h_price,name:e[a].name,artist:e[a].artist,color:e[a].color});else if("jersey"===t.style)if("art"===t.display)for(var a=0;a<e.length;a++)null!=e[a].men_j&&r.push({gender:"male",id:e[a].shirt_id,img:e[a].art,price:e[a].men_j_price,name:e[a].name,artist:e[a].artist,color:e[a].color});else for(var a=0;a<e.length;a++)null!=e[a].men_j&&r.push({gender:"male",id:e[a].shirt_id,img:e[a].men_j,price:e[a].men_j_price,name:e[a].name,artist:e[a].artist,color:e[a].color});else if("longSleeve"===t.style)if("art"===t.display)for(var a=0;a<e.length;a++)null!=e[a].men_ls&&r.push({gender:"male",id:e[a].shirt_id,img:e[a].art,price:e[a].men_ls_price,name:e[a].name,artist:e[a].artist,color:e[a].color});else for(var a=0;a<e.length;a++)null!=e[a].men_ls&&r.push({gender:"male",id:e[a].shirt_id,img:e[a].men_ls,price:e[a].men_ls_price,name:e[a].name,artist:e[a].artist,color:e[a].color})}else if("gals"===t.type)if("dol"===t.style)if("art"===t.display)for(var a=0;a<e.length;a++)null!=e[a].woman_d&&r.push({gender:"female",id:e[a].shirt_id,img:e[a].art,price:e[a].woman_d_price,name:e[a].name,artist:e[a].artist,color:e[a].color});else for(var a=0;a<e.length;a++)null!=e[a].woman_d&&r.push({gender:"female",id:e[a].shirt_id,img:e[a].woman_d,price:e[a].woman_d_price,name:e[a].name,artist:e[a].artist,color:e[a].color});else if("tees"===t.style)if("art"===t.display)for(var a=0;a<e.length;a++)null!=e[a].woman_t&&r.push({gender:"female",id:e[a].shirt_id,img:e[a].art,price:e[a].woman_t_price,name:e[a].name,artist:e[a].artist,color:e[a].color});else for(var a=0;a<e.length;a++)null!=e[a].woman_t&&r.push({gender:"female",id:e[a].shirt_id,img:e[a].woman_t,price:e[a].woman_t_price,name:e[a].name,artist:e[a].artist,color:e[a].color});else if("hoodie"===t.style)if("art"===t.display)for(var a=0;a<e.length;a++)null!=e[a].woman_h&&r.push({gender:"female",id:e[a].shirt_id,img:e[a].art,price:e[a].woman_h_price,name:e[a].name,artist:e[a].artist,color:e[a].color});else for(var a=0;a<e.length;a++)null!=e[a].woman_h&&r.push({gender:"female",id:e[a].shirt_id,img:e[a].woman_h,price:e[a].woman_h_price,name:e[a].name,artist:e[a].artist,color:e[a].color});else if("jersey"===t.style)if("art"===t.display)for(var a=0;a<e.length;a++)null!=e[a].woman_j&&r.push({gender:"female",id:e[a].shirt_id,img:e[a].art,price:e[a].woman_j_price,name:e[a].name,artist:e[a].artist,color:e[a].color});else for(var a=0;a<e.length;a++)null!=e[a].woman_j&&r.push({gender:"female",id:e[a].shirt_id,img:e[a].woman_j,price:e[a].woman_j_price,name:e[a].name,artist:e[a].artist,color:e[a].color});else if("longSleeve"===t.style)if("art"===t.display)for(var a=0;a<e.length;a++)null!=e[a].woman_ls&&r.push({gender:"female",id:e[a].shirt_id,img:e[a].art,price:e[a].woman_ls_price,name:e[a].name,artist:e[a].artist,color:e[a].color});else for(var a=0;a<e.length;a++)null!=e[a].woman_ls&&r.push({gender:"female",id:e[a].shirt_id,img:e[a].woman_ls,price:e[a].woman_j_price,name:e[a].name,artist:e[a].artist,color:e[a].color});else if("v-neck"===t.style)if("art"===t.display)for(var a=0;a<e.length;a++)null!=e[a].woman_v&&r.push({gender:"female",id:e[a].shirt_id,img:e[a].art,price:e[a].woman_v_price,name:e[a].name,artist:e[a].artist,color:e[a].color});else for(var a=0;a<e.length;a++)null!=e[a].woman_v&&r.push({gender:"female",id:e[a].shirt_id,img:e[a].woman_v,price:e[a].woman_v_price,name:e[a].name,artist:e[a].artist,color:e[a].color});if(""===t.color)return r;for(var a=0;a<r.length;a++)r[a].color!=t.color&&(r.splice(a,1),a--);return r}}]),angular.module("myapp").directive("showProduct",function(){return{restrict:"E",templateUrl:"../../views/productDir.html",scope:{item:"="}}}),angular.module("myapp").controller("checkoutCtrl",["$scope","checkoutService","stripe","$state",function(e,t,r,a){e.stepOneFinished=!1,e.stepTwoFinished=!1,e.stepTwoActive=!1,e.deliveryAddress={},e.billingAddress={},e.payment={},e.clearStepOne=function(t){e.stepOneFinished=!0;for(var r=document.getElementById("delivery_address"),a=document.getElementById("shipping_address"),n=0;n<r.length;n++)e.deliveryAddress[r.elements[n].name]=r.elements[n].value;if(t===!0){for(var n=0;n<r.length;n++)a[n].value=r[n].value;return void e.clearStepTwo()}e.stepTwoActive=!0},e.clearStepTwo=function(){e.stepTwoFinished=!0;for(var t=document.getElementById("shipping_address"),r=0;r<t.length;r++)e.billingAddress[t.elements[r].name]=t.elements[r].value;e.stepTwoActive=!1},e.editOne=function(){e.stepOneFinished=!1,e.stepTwoFinished=!1,e.stepTwoActive=!1},e.editTwo=function(){e.stepOneFinished=!0,e.stepTwoFinished=!1,e.stepTwoActive=!0},e.payment={},e.charge=function(){return r.card.createToken(e.payment.card).then(function(r){var a=angular.copy(e.payment);a.card=void 0,a.token=r.id;var n=e.subtotal+e.estimatedShipping;n*=100,t.processPayment(n,a)}).then(function(t){swal({title:"Thank You!",text:"Your order will be shipped within 3 business days.",imageUrl:"http://www.idealaunch.com/blog/wp-content/uploads/2009/09/Threadless_logo.png",confirmButtonText:"Continue shopping Threadless"}),e.setZero(),a.go("home")}).catch(function(e){e.type&&/^Stripe/.test(e.type)?console.log("Stripe error: ",e.message):console.log("Other error occurred, possibly with your API",e.message)})}}]),angular.module("myapp").service("checkoutService",["$http",function(e){this.processPayment=function(t,r){return e({method:"POST",url:"/api/payment",data:{amount:t,payment:r}})}}]),angular.module("myapp").controller("mainCtrl",["$scope","$stateParams","mainService",function(e,t,r){e.all=[],e.total=0,e.subtotal=0,e.totalPrice=0,e.estimatedShipping=11,e.allProducts=function(){r.getProducts().then(function(t){e.all=t})},e.setZero=function(){e.total=0,e.subtotal=0,e.totalPrice=0,e.cart=[]},e.allProducts(),e.cart=[],e.test=function(t,r,a){if(""===a);else{for(var n=!1,i=0;i<e.cart.length;i++)e.cart[i].img===r.img&&e.cart[i].sized===a&&(e.cart[i].quantity++,n=!0,e.total++,e.subtotal=parseFloat(e.subtotal)+parseFloat(r.price));n===!1&&(e.cart.push({img:r.img,name:e.all[t].name,artist:e.all[t].artist,type:r.type,sized:a,price:r.price,quantity:1}),e.total++,e.subtotal=parseFloat(e.subtotal)+parseFloat(r.price))}},e.remove=function(t){for(var r=0;r<e.cart.length;r++)e.cart[r].img===t.img&&e.cart[r].sized===t.sized&&(e.total-=e.cart[r].quantity,e.subtotal-=e.cart[r].quantity*e.cart[r].price,e.cart.splice(r,1))},e.updateQuantity=function(){e.subtotal=0;for(var t=0;t<e.cart.length;t++)e.subtotal+=parseFloat(e.cart[t].quantity)*parseFloat(e.cart[t].price)}}]),angular.module("myapp").service("mainService",["$http","$stateParams",function(e,t){this.getProducts=function(){return e({method:"GET",url:"/api/products"}).then(function(e){return e.data})}}]),angular.module("myapp").controller("mensCtrl",["$scope",function(e){}]),angular.module("myapp").directive("cartModule",function(){return{restrict:"E",templateUrl:"../../views/cartDir.html",scope:{item:"=",additem:"=",d:"="},controller:["$scope","$stateParams",function(e,t){e.size="",e.sizeSelected=function(t){e.size=t}}]}}),angular.module("myapp").controller("productCtrl",["$scope","productService","$stateParams",function(e,t,r){e.id=r.id-1,e.product,e.maleProducts=[],e.femaleProducts=[],e.images=[],e.purchasable=[],e.mainImage="",e.focus=r.gender,e.size="",e.setFalse=function(e){for(var t=0;t<purchasable.length;t++)e===purchasable[t].type?purchasable[t].show=!0:purchasable[t].show=!1},e.getInfo=function(a){e.maleProducts=t.getMenImages(a,e.id),e.femaleProducts=t.getWomenImages(a,e.id),e.product=t.getInfo(a,e.id),e.purchasable=t.getPurchaseable(a,e.id,r.gender),e.images=t.getImages(a,e.id,r.gender),e.mainImage=t.setMain(e.images,e.purchasable)},e.getAllProducts=function(){t.getProducts().then(function(t){e.getInfo(t)})},e.getAllProducts(),e.updateMain=function(t){e.mainImage=t.img;for(var r=0;r<e.purchasable.length;r++)e.purchasable[r].show=!1,e.purchasable[r].img===t.img&&(e.purchasable[r].show=!0)},e.sizeSelected=function(t){e.size=t}}]),angular.module("myapp").service("productService",["$http",function(e){this.getProducts=function(){return e({method:"GET",url:"/api/products"}).then(function(e){return e.data})},this.getMenImages=function(e,t){var r=[];return r.push({img:e[t].art,price:e[t].men_t_price}),null!==e[t].men_t&&r.push({img:e[t].men_t,price:e[t].men_t_price,type:"mens tee",show:!1}),null!==e[t].men_v&&r.push({img:e[t].men_v,price:e[t].men_v_price,type:"mens v-Neck",show:!1}),null!==e[t].men_j&&r.push({img:e[t].men_j,price:e[t].men_j_price,type:"mens tank",show:!1}),null!==e[t].men_h&&r.push({img:e[t].men_h,price:e[t].men_h_price,type:"mens hoodie",show:!1}),null!==e[t].men_ls&&r.push({img:e[t].men_ls,price:e[t].men_ls_price,type:"mens long sleeve",show:!1}),r},this.getWomenImages=function(e,t){var r=[];return r.push({img:e[t].art,price:e[t].woman_t_price,type:"womens tee"}),null!==e[t].woman_d&&r.push({img:e[t].woman_d,price:e[t].woman_d_price,type:"womens dolman",show:!1}),null!==e[t].woman_t&&r.push({img:e[t].woman_t,price:e[t].men_t_price,type:"womens tee",show:!1}),null!==e[t].woman_j&&r.push({img:e[t].woman_j,price:e[t].men_j_price,type:"womens tank",show:!1}),null!==e[t].woman_h&&r.push({img:e[t].woman_h,price:e[t].men_h_price,type:"womens hoddie",show:!1}),null!==e[t].woman_ls&&r.push({img:e[t].woman_ls,price:e[t].men_ls_price,type:"womens long Sleeve",show:!1}),null!==e[t].woman_v&&r.push({img:e[t].woman_v,price:e[t].men_v_price,type:"womens v-Neck",show:!1}),r},this.getProduct=function(e,t){return e[t]},this.getImages=function(e,t,r){return"female"===r?this.getWomenImages(e,t):this.getMenImages(e,t)},this.getPurchaseable=function(e,t,r){if("female"===r){var a=this.getWomenImages(e,t).splice(1,this.getWomenImages(e,t).length);return a}var a=this.getMenImages(e,t).slice(1,this.getMenImages(e,t).length);return a},this.setMain=function(e,t){return t[0].show=!0,e[1].img},this.getInfo=function(e,t){var r={artist:e[t].artist,name:e[t].name};return r}}]),angular.module("myapp").controller("splashCtrl",["$scope",function(e){}]),angular.module("myapp").controller("shopCtrl",["$scope",function(e){e.test="shop controller works"}]);